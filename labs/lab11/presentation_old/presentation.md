---
## Front matter
lang: ru-RU
title: Лабораторная работа № 10
subtitle: Основы работы с модулями ядра операционной системы
author:
  - Сергеев Д. О.
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 08 ноября 2025

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
---

# Информация

## Докладчик

:::::::::::::: {.columns align=center}
::: {.column width="70%"}

  * Сергеев Даниил Олегович
  * Студент
  * Направление: Прикладная информатика
  * Российский университет дружбы народов
  * [1132246837@pfur.ru](mailto:1132246837@pfur.ru)

:::
::::::::::::::

# Цель работы

Получить навыки работы с утилитами управления модулями ядра операционной системы.

# Задание

- Продемонстрируйте навыки работы по управлению модулями ядра.
- Продемонстрируйте навыки работы по загрузке модулей ядра с параметрами.

# Ход выполнения лабораторной работы

# Управление модулями ядра из командной строки

## Управление модулями ядра из командной строки

![Список устройств и связаных модулей ядра](image/1.PNG){#fig:001 width=90%}

## Управление модулями ядра из командной строки

Общая форма записи устройства:

- Шаблон: адрес  класс:  производитель [вендор:устройство] название \[доп_инфо\] (ревизия)
- Пример: 00:01.0 ISA bridge: Intel Corporation 82371SB PIIX3 ISA [Natoma/Triton II]
    1. 00:01.0 - Номер шины PCI: 00; Номер устройства: 01; Номер функции: 0;
    2. ISA bridge - мост для использования шин ISA;
    3. Intel Corporation - производитель Intel;
    4. 82371SB PIIX3 ISA - имя устройства;
    5. [Natoma/Triton II] - устройство входит в состав чипсета Natoma/Triton II;

Для модулей ядра, используемых устройством:

- Kernel driver in use - драйвер ядра, который используется в данный момент;
- Kernel modules - список всех модулей, которых использует данное устройство;

## Управление модулями ядра из командной строки

![Загруженные модули ядра kernel](image/2.PNG){#fig:002 width=90%}

## Управление модулями ядра из командной строки

![Загрузка модуля ext4](image/3.PNG){#fig:003 width=90%}

## Управление модулями ядра из командной строки

![Подробная информация о ext4](image/4.PNG){#fig:004 width=90%}

## Управление модулями ядра из командной строки

![Выгрузка ext4 и xfs](image/5.PNG){#fig:005 width=90%}

# Загрузка модулей ядра с параметрами

## Загрузка модулей ядра с параметрами

![Загрузка модуля bluetooth и список модулей ядра](image/6.PNG){#fig:006 width=90%}

## Загрузка модулей ядра с параметрами

![Информация о bluetooth](image/7.PNG){#fig:007 width=50%}

## Загрузка модулей ядра с параметрами

В отличие от ext4, у модуля bluetooth имеются параметры, а именно:

- disable_esco - Отключить создание соединений eSCO;
- disable_ertm - Отключить расширенный режим повторной передачи;
- enable_ecred - Включить расширенный режим управления потоком на основе кредитов;

Выгрузим модуль ядра bluetooth.
```bash
modprobe -r bluetooth
```

# Обновление ядра системы

## Обновление ядра системы

![Версия ядра и обновление системы](image/8.PNG){#fig:008 width=90%}

Ядро имеет версию 5.14.0-570.**39**.1.el9_6.x86_64

## Обновление ядра системы

![Обновление ядра и системы](image/9.PNG){#fig:009 width=90%}

## Обновление ядра системы

Все пакеты и ядро уже обновлены, поэтому перегрузим систему. В моем случае новая версия ядра при загрузке выбралась автоматически, поэтому пропустим этап выбора ядра.

Посмотрим новую версию ядра.
```bash
uname -r
hostnamectl
```

## Обновление ядра системы

![Просмотр новой версии ядра](image/10.PNG){#fig:010 width=90%}

Теперь система имеет версию 5.14.0-570.**58**.1.el9_6.x86_64

# Ответы на контрольные вопросы

## Ответы на контрольные вопросы

1. Какая команда показывает текущую версию ядра, которая используется на вашей системе?

- uname -r

2. Как можно посмотреть более подробную информацию о текущей версии ядра операционной системы?

- hostnamectl

3. Какая команда показывает список загруженных модулей ядра?

- lsmod

## Ответы на контрольные вопросы

4. Какая команда позволяет вам определять параметры модуля ядра?

- modinfo \<модуль\>

5. Как выгрузить модуль ядра?

- modprobe -r \<модуль\> 
- или rmmod \<модуль\>

6. Что вы можете сделать, если получите сообщение об ошибке при попытке выгрузить модуль ядра?

- Проверить зависимости модуля, если они есть, то выгрузить их. После чего снова попытаться выгрузить модуль.

## Ответы на контрольные вопросы

7. Как определить, какие параметры модуля ядра поддерживаются?

- modinfo \<модуль\> | grep parm

8. Как установить новую версию ядра?

- dnf upgrade --refresh - обновим систему
- dnf update kernel - обновим ядро на новую версию
- dnf update - проверим обновление ядра
- dnf upgrade --refresh - проверим обновление системы
- После выполнения данных команд необходимо перезапустить систему, чтобы выбрать новое ядро.

# Вывод

В результате выполнения лабораторной работы я узнал как проверять, какие модули и устройства загружены в систему, научился загружать и выгружать модули с параметрами и без и понял как корректно обновлять ядро системы.
