---
## Front matter
lang: ru-RU
title: Лабораторная работа № 5
subtitle: Управление системными службами
author:
  - Сергеев Д. О.
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 04 октября 2025

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
---

# Информация

## Докладчик

:::::::::::::: {.columns align=center}
::: {.column width="70%"}

  * Сергеев Даниил Олегович
  * Студент
  * Направление: Прикладная информатика
  * Российский университет дружбы народов
  * [1132246837@pfur.ru](mailto:1132246837@pfur.ru)

:::
::::::::::::::

# Цель работы

Получить навыки управления системными службами операционной системы посредством systemd.

# Задание

- Выполните основные операции по запуску (останову), определению статуса, добавлению(удалению) в автозапуск и пр. службы Very Secure FTP.
- Продемонстрируйте навыки по разрешению конфликтов юнитов для служб firewalld и iptables.
- Продемонстрируйте навыки работы с изолированными целями.

# Ход выполнения лабораторной работы

# Управление сервисами

## Управление сервисами

![Проверка статуса службы VSFTP до установки](image/1.PNG){#fig:001 width=90%}

## Управление сервисами

![Запустим и проверим службу ещё раз](image/2.PNG){#fig:002 width=90%}

## Управление сервисами

![Работа с автозапуском службы VSFTP](image/3.PNG){#fig:003 width=90%}

## Управление сервисами

![Символические ссылки для различных юнитов](image/4.PNG){#fig:004 width=90%}

## Управление сервисами

![Добавление символической ссылки для VSFTP](image/5.PNG){#fig:005 width=90%}

## Управление сервисами

![Проверка статуса VSFTP](image/6.PNG){#fig:006 width=90%}

## Управление сервисами

![Зависимости VSFTP](image/7.PNG){#fig:007 width=90%}

# Конфликты юнитов

## Конфликты юнитов

![Установка iptables](image/8.PNG){#fig:008 width=90%}

## Конфликты юнитов

![Проверка статусов firewalld и iptables](image/9.PNG){#fig:009 width=90%}

## Конфликты юнитов

![Запуск двух служб одновременно](image/10.PNG){#fig:010 width=80%}

## Конфликты юнитов

![Файл юнита firewalld](image/11.PNG){#fig:011 width=90%}

## Конфликты юнитов

![Файл юнита iptables](image/12.PNG){#fig:012 width=90%}

## Конфликты юнитов

![Наложение маски на iptables](image/13.PNG){#fig:013 width=90%}

# Изолируемые цели

## Изолируемые цели

![Список активных загруженных целей](image/14.PNG){#fig:014 width=90%}

## Изолируемые цели

![Список изолируемых целей](image/15.PNG){#fig:015 width=90%}

## Изолируемые цели

![Окно режима восстановления](image/16.PNG){#fig:016 width=90%}

# Цель по умолчанию

## Цель по умолчанию

![Установка цели по умолчанию](image/17.PNG){#fig:017 width=90%}

## Цель по умолчанию

![Возврат graphical.target как цели по умолчанию](image/18.PNG){#fig:018 width=90%}

## Цель по умолчанию

![Загрзка системы в графическом режиме](image/19.PNG){#fig:019 width=90%}

# Ответы на контрольные вопросы

1. Что такое юнит(unit)? Приведите примеры.

- Юнит(unit) - это объекты конфигурации, используются для выполнения операций над системными службами systemd. Они бывают разных типов. Например, существует service (управляет запуском системных служб), timer(аналог cron для планирования задач), target(объединение нескольких сервисов) и прочие.
- Пример: graphical.target используется для запуска графического интерфейса, sshd.service задает параметры для демона(процесса) sshd, тем самым управляя им.

## Ответы на контрольные вопросы

2. Какая команда позволяетвам убедиться,что цель больше не входит в список автоматического запуска при загрузке системы?

- systemctl is-enabled \<цель\> - узнать напрямую
- systemctl status \<цель\> | grep -i loaded - получить через статус цели

![Проверка автоматического запуска](image/20.PNG){#fig:020 width=90%}

## Ответы на контрольные вопросы

3. Какую команду вы должны использовать для отображения всех сервисных юнитов, которые в настоящее время загружены?

- systemctl list-units --type=service - все юниты типа service

![Вывод всех загруженных сервисных юнитов (первые 9)](image/21.PNG){#fig:021 width=90%}

## Ответы на контрольные вопросы

4. Как создать потребность (wants) в сервисе?

- systemctl add-wants \<цель\>.target \<сервис\>.service - автоматическое добавление через systemctl
- ln -s /usr/lib/systemd/system/\<зависимый сервис\>.service /etc/systemd/system/\<сервис\>.service.wants/ - добавление символической ссылки вручную

## Ответы на контрольные вопросы

5. Как переключить текущее состояние на цель восстановления (rescue target)?

- systemctl rescue
- systemctl isolate rescue.target

6. Поясните причину получения сообщения о том, что цель не может быть изолирована.

- Цель не может быть изолирована, если в ней отсутствует параметр AllowIsolate=yes, либо его значение равно AllowIsolate=no

## Ответы на контрольные вопросы

7. Вы хотите отключить службу systemd, но, прежде чем сделать это, вы хотите узнать, какие другие юниты зависят от этой службы. Какую команду вы бы использовали?

- systemctl list-dependencies \<цель\>

# Вывод

В результате выполнения лабораторной работы я ознакомился с инструментами управления системными службами операционной системы, выполнил основные операции со службами на примере VerySecureFTP, научился разрешать конфликты юнитов и изолировать их.
